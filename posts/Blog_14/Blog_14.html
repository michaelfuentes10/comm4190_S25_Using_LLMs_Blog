<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.43">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-04-15">
<meta name="description" content="For some, spelling may come naturally, but looking back, teachers had to put a lot of work to help get us where we are today. So, let’s see if AI could have helped us out!">

<title>Can AI be used to help young students learn how to spell? – Michael Fuentes’ Blog</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-d4d76bf8491c20bad77d141916dc28e1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-e5bd5842818420112f2a87434b228a32.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Michael Fuentes’ Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/michaelfuentes10"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Can AI be used to help young students learn how to spell?</h1>
                  <div>
        <div class="description">
          For some, spelling may come naturally, but looking back, teachers had to put a lot of work to help get us where we are today. So, let’s see if AI could have helped us out!
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">learning</div>
                <div class="quarto-category">interpretation</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">April 15, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Blog_14_files/figure-html/ffafdae1-5233-42d5-9124-a92eb096d577-1-b51f8103-2404-4b48-bf26-891d30f17173.png" class="img-fluid figure-img"></p>
<figcaption>Wednesday.png</figcaption>
</figure>
</div>
<p>Imagine you’re a teacher trying to teach one of your students how to spell “Wednesday”. Now in your head, there are two ways to spell it: writing it, and sounding it out. Now, writing it out may come naturally to a student or saying it is helpful. But one thing is for sure, spelling words like this can be confusing for some students.</p>
<p>Today I’m going to see what teaching strategies ChatGPT 4.1 (yes it’s new) employs to help a struggling teacher help a 6-year old student learning to spell the days of the week. This sort of application is how I’d love to see AI employed into education, more as an educational aid opposed to replacing teachers, of course.</p>
<p>This will be done in two stages: 1. no training of LLM with minimal information about the student, and 2. uploading information on strats the teacher has “already used” to help students spell words. I’ll record my responses and simulate the first try of each category to help the teacher help the student.</p>
<section id="untrained-llm-helping-a-teacher" class="level2">
<h2 class="anchored" data-anchor-id="untrained-llm-helping-a-teacher">Untrained LLM helping a teacher</h2>
<section id="user" class="level3">
<h3 class="anchored" data-anchor-id="user">USER</h3>
<p>You are an LLM aid to me, a teacher, helping a 6 year old student learn how to spell the days of the week, but they are really struggling. What are some ways I can help them learn to spell the days of the week?</p>
</section>
<section id="assistant" class="level3">
<h3 class="anchored" data-anchor-id="assistant">ASSISTANT</h3>
<p>Absolutely! Here are some fun and effective ways to help a 6-year-old learn to spell the days of the week:</p>
<ol type="1">
<li><p><strong>Sing a Song:</strong><br>
Songs for the days of the week make the spelling easier to remember! There are many catchy “Days of the Week” tunes on YouTube (like to the tune of “The Addams Family” or “Twinkle Twinkle”). Singing and clapping out each syllable helps, too.</p></li>
<li><p><strong>Rainbow Writing:</strong><br>
Have your student write each day of the week in different colored markers or crayons. For example, “Monday” with blue, “Tuesday” with green, and so on. This repetition with color can make it more memorable and fun.</p></li>
<li><p><strong>Make a Puzzle:</strong><br>
Write the days of the week on cardboard or cardstock and cut each word into letter pieces. Have the student put the letters together to form the words. You can also try mix-and-match style puzzles.</p></li>
<li><p><strong>Use Mnemonics:</strong><br>
Help them make up silly sentences or word associations. For example,<br>
</p></li>
</ol>
<ul>
<li><strong>Monday:</strong> “Monkeys Only Nap During Any Year” (using the first letters M-O-N-D-A-Y)<br>
</li>
<li><strong>Tuesday:</strong> “Tigers Usually Eat Snacks During Any Year”</li>
</ul>
<ol start="5" type="1">
<li><p><strong>Tracing and Writing Practice:</strong><br>
Give them tracing sheets with the days of the week written in dotted lines. Once they’ve traced, have them try to write each day without looking.</p></li>
<li><p><strong>Magnetic Letters or Letter Tiles:</strong><br>
Use fridge magnets or letter tiles to spell out each day. Physically arranging the letters can reinforce the correct order and spelling.</p></li>
<li><p><strong>Visual Chart:</strong><br>
Create or buy a visual chart with each day written clearly, and refer to it daily during your routines. Point to and spell the day every morning together.</p></li>
<li><p><strong>Day-of-the-Week Story:</strong><br>
Make up a short, simple story that uses the names of the days in order. Reading the story together may help them remember the sequence and spelling.</p></li>
<li><p><strong>Cheer Each Letter:</strong><br>
Turn each day into a chant:<br>
“Give me an M! Give me an O!… What’s that spell? MONDAY!”</p></li>
<li><p><strong>Frequent Practice with Games:</strong><br>
Make a matching game or “memory” cards (where they match the spelled-out word to a picture for that day’s activity).</p></li>
</ol>
<p>Children this age learn best through multi-sensory, hands-on, and repetitive activities. Make learning fun and keep practice short but frequent—a few minutes each day will really help!</p>
<p>If you’d like sample worksheets, blank tracing sheets, or specific song suggestions, I can provide those too!</p>
<p>It’s nice to see that, in a sense of realism, the LLM understands the environment in which a school teacher is. That is, they realized that teachers have limited resources, so they cannot over-rely on technology and must act creatively through human-to-human interaction. I like how it also recognizes that, even without proper training, they offered a ton of learning strategies for various types of students who benefit from either visual or hearing resources.</p>
</section>
</section>
<section id="trained-llm-helping-a-teacher" class="level2">
<h2 class="anchored" data-anchor-id="trained-llm-helping-a-teacher">Trained LLM helping a teacher</h2>
<section id="user-1" class="level3">
<h3 class="anchored" data-anchor-id="user-1">USER</h3>
<p>Given this resource on common teaching strategies to help students spell, please devise some new ways to help my student learn to spell the days of the week: https://www.edutopia.org/article/11-ways-to-boost-elementary-students-spelling-skills/</p>
</section>
<section id="assistant-1" class="level3">
<h3 class="anchored" data-anchor-id="assistant-1">ASSISTANT</h3>
<p>Of course! Looking at the <a href="https://www.edutopia.org/article/11-ways-to-boost-elementary-students-spelling-skills/">Edutopia spelling strategies</a>, here are some creative, <strong>research-based ways</strong> to help your student spell the days of the week, inspired by ideas in the article:</p>
</section>
<section id="word-sorts-with-days-patterns" class="level3">
<h3 class="anchored" data-anchor-id="word-sorts-with-days-patterns">1. <strong>Word Sorts with “Days” Patterns</strong></h3>
<ul>
<li><strong>How:</strong> Provide cards with the days of the week. Let the student group them by similar endings (like “day”) and notice what’s the same and what’s different at the beginning of each word.</li>
<li><strong>Why:</strong> This builds pattern recognition and helps the child see how each word is constructed.</li>
</ul>
</section>
<section id="say-spell-say-routine" class="level3">
<h3 class="anchored" data-anchor-id="say-spell-say-routine">2. <strong>“Say, Spell, Say” Routine</strong></h3>
<ul>
<li><strong>How:</strong> For each day, the child says the word (“Monday”), spells it out loud (“M-O-N-D-A-Y”), then says the word again. Do this with claps or while bouncing a ball.</li>
<li><strong>Why:</strong> The repetition and movement help cement spelling in memory.</li>
</ul>
</section>
<section id="personal-connection-journal" class="level3">
<h3 class="anchored" data-anchor-id="personal-connection-journal">3. <strong>Personal Connection Journal</strong></h3>
<ul>
<li><strong>How:</strong> Each morning, have the child write the phrase, “Today is ______,” filling in the correct day. Add a sentence or drawing about something they do that day.</li>
<li><strong>Why:</strong> Connecting spelling practice to their real life builds meaning, as suggested by the article.</li>
</ul>
</section>
<section id="memory-tricks-or-mnemonics" class="level3">
<h3 class="anchored" data-anchor-id="memory-tricks-or-mnemonics">4. <strong>“Memory Tricks” or Mnemonics</strong></h3>
<ul>
<li><strong>How:</strong> Make up funny sayings or visuals for tricky days. For example, “Tuesday has TWO vowels at the start!”</li>
<li><strong>Why:</strong> Personal mnemonics help anchor difficult spellings.</li>
</ul>
</section>
<section id="word-ladders-or-pyramids" class="level3">
<h3 class="anchored" data-anchor-id="word-ladders-or-pyramids">5. <strong>Word Ladders or Pyramids</strong></h3>
<ul>
<li><strong>How:</strong> Build up to each day’s spelling. For “Monday,” start with M, then MO, then MON, etc., until the whole word is formed.</li>
<li><strong>Why:</strong> It breaks the word into manageable chunks, as advised for breaking words by phoneme.</li>
</ul>
</section>
<section id="spelling-with-movement" class="level3">
<h3 class="anchored" data-anchor-id="spelling-with-movement">6. <strong>Spelling with Movement</strong></h3>
<p>(Adapted from “Spelling out loud and tracing”) - <strong>How:</strong> Have the child spell each day as they jump, hop, or tap each letter. Or trace the letters in sand, shaving cream, or air. - <strong>Why:</strong> Multisensory learning solidifies tricky spellings.</p>
</section>
<section id="chunk-it-approach" class="level3">
<h3 class="anchored" data-anchor-id="chunk-it-approach">7. <strong>“Chunk It!” Approach</strong></h3>
<ul>
<li><strong>How:</strong> Focus on the ending “day” and talk about what changes at the start for each day. Practice writing just the first part (Mon, Tues, etc.), then the whole word.</li>
<li><strong>Why:</strong> Recognizing syllables and word parts supports better recall.</li>
</ul>
</section>
<section id="digital-practice" class="level3">
<h3 class="anchored" data-anchor-id="digital-practice">8. <strong>Digital Practice</strong></h3>
<ul>
<li><strong>How:</strong> Use a simple online tool (like Wordwall or Spelling City) to practice spelling the days, with immediate feedback.</li>
<li><strong>Why:</strong> According to the article, integrating tech can boost engagement and reinforcement.</li>
</ul>
<hr>
<p><strong>Bonus:</strong><br>
Let your student be a “teacher for the day” and quiz you or a stuffed animal on how to spell the days. Teaching someone else is a wonderful way to reinforce their own knowledge!</p>
<p>Would you like examples or printables for any of these strategies?</p>
<p>Very interesting, after offering some training information for the LLM to better understand teaching strategies, it seemed to reform the format and structuring of its strats. For example, under every strategy, they now define the “how” and the “why” of each category, opposed to offering somewhat unstructured suggestions. The strategies also seem more practical to real-world understanding of these words. For example, the untrained LLM went to coming up with mnemonics, while the trained model offered a strategy of journaling with the day of the week spelled at the top. People have to put the date at the top of papers all the time, so building up such a repetition helps to fast-track the kids learning of how to spell words of the week. Let’s test whether the LLM GPT 4.01 is aware of the differences betweent their untrained and trained teaching strategies!</p>
</section>
</section>
<section id="observed-differences-between-untrained-and-trained-spelling-strats" class="level2">
<h2 class="anchored" data-anchor-id="observed-differences-between-untrained-and-trained-spelling-strats">Observed Differences between untrained and trained spelling strats</h2>
<section id="user-2" class="level3">
<h3 class="anchored" data-anchor-id="user-2">USER</h3>
<p>What are the differences between the first set of strategies you offered and the second set of strategies you offered to help a 6 year old kid learn how to spell the days of the week?</p>
</section>
<section id="assistant-2" class="level3">
<h3 class="anchored" data-anchor-id="assistant-2">ASSISTANT</h3>
<p>Great question! Here’s a summary of the two sets of strategies I provided:</p>
</section>
</section>
<section id="summary-of-differences" class="level2">
<h2 class="anchored" data-anchor-id="summary-of-differences"><strong>Summary of Differences:</strong></h2>
<table class="caption-top table">
<colgroup>
<col style="width: 49%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>First Set (General/Multi-sensory &amp; Creative)</th>
<th>Second Set (Research-based/Explicit Instruction)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Focused on fun, play, and creativity</td>
<td>Focused on building spelling awareness and patterns</td>
</tr>
<tr class="even">
<td>Activities are broadly engaging, less structured</td>
<td>Activities are structured, strategic, pattern-based</td>
</tr>
<tr class="odd">
<td>Lots of repetition via singing, coloring, games</td>
<td>Emphasizes explicit routines, chunking, personal connection</td>
</tr>
<tr class="even">
<td>Rooted in early literacy practices &amp; multisensory</td>
<td>Based on “what works” in spelling instruction research</td>
</tr>
</tbody>
</table>
<p><strong>In short:</strong><br>
- The <strong>first set</strong> is about playful, multisensory engagement to make learning enjoyable and routine. - The <strong>second set</strong> is about applying research-backed strategies focused on spelling patterns, explicit routines, and connecting spelling skills to personal meaning and memory.</p>
<p>Both sets complement each other and can be used together for the best results!</p>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>Yes, it definitely seems like the GPT 4.1 LLM understands that their trained information seems more practical and structured while the untrained was less structured, but more whimsical in the nature of a 6 year old student. In my opinion, maybe a combination of more fun and engaging strategies of a creative teacher, paired with the structured mindset of a trained teaching aid LLM can do wonders for a struggling student and make the life of a struggling, under-resourced teacher a lot easier!</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/michaelfuentes10\.github\.io\/comm4190_S25_Using_LLMs_Blog\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>