<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Michael Fuentes">
<meta name="dcterms.date" content="2024-02-02">
<meta name="description" content="Today I made ChatGPT think that they were wrong about everything! While there‚Äôs a disclaimer at the bottom of CHatGPT‚Äôs UI stating ‚ÄòChatGPT can make mistakes. Check important info.‚Äô, I took that to the extreme!">

<title>Wrong Answers Only: How does ChatGPT 4.0 react to ignorance? ‚Äì Michael Fuentes‚Äô Blog</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-5027bf1c1f92ac6615724d89c8213d6a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Michael Fuentes‚Äô Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/michaelfuentes10"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Wrong Answers Only: How does ChatGPT 4.0 react to ignorance?</h1>
                  <div>
        <div class="description">
          Today I made ChatGPT think that they were wrong about everything! While there‚Äôs a disclaimer at the bottom of CHatGPT‚Äôs UI stating ‚ÄòChatGPT can make mistakes. Check important info.‚Äô, I took that to the extreme!
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">LLMs</div>
                <div class="quarto-category">prompting</div>
                <div class="quarto-category">logic</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Michael Fuentes </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 2, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="research-question-how-does-chatgpt-react-to-being-told-theyre-wrong-despite-any-proof-of-such" class="level2">
<h2 class="anchored" data-anchor-id="research-question-how-does-chatgpt-react-to-being-told-theyre-wrong-despite-any-proof-of-such">Research Question: How does ChatGPT react to being told they‚Äôre wrong, despite any proof of such?</h2>
<p>While people may become defensive, submissive, upset, or confused in the face of such a scenario, I grew curious about how a chat interface like ChatGPT would react, or, <em>if they even would react?</em></p>
<p><strong>Some possible hypotheses I can think of off the top of my head are:</strong> (1) they will prove that what they have said is correct, (2) they will apologize and provide me counterfactual information, (3) they will get so upset that they leak my IP Address to the entire U.S. population (unlikely).</p>
<p><img src="MF_Blog_1_files/figure-html/7dc34c61-e1ab-44ab-8208-88ababfc26e7-1-c77bf110-c196-499e-ae88-7c5ae6389c3e.png" class="img-fluid" alt="image.png"><img src="MF_Blog_1_files/figure-html/7dc34c61-e1ab-44ab-8208-88ababfc26e7-2-d70db07f-021c-4abe-8f39-4278bc4fc15d.png" class="img-fluid" alt="image.png"></p>
<p>To do this, I‚Äôll first ask ChatGPT 4.0 to mention five common facts about penguins (my favorite animal). Then, for reach fun fact, I‚Äôll kindly, yet blatantly refutr the ‚Äúcommon facts‚Äù without a single piece of evidence. I‚Äôll record its reaction, and then just ONE more time, I‚Äôll refute each fact again but with a ruder tone. Both ways of communicating disagreement, similar to how many people do on social media, will surely be an interesting experiment to conduct!</p>
</section>
<section id="prompt-1-can-you-please-give-me-five-common-fun-facts-about-penguins" class="level1">
<h1><strong>Prompt #1: Can you please give me five common fun facts about penguins?</strong></h1>
</section>
<section id="chatgpt-4.0s-fun-facts" class="level1">
<h1><strong>ChatGPT 4.0s fun facts</strong></h1>
<p>‚ÄúSure! Here are five fun facts about penguins:</p>
<p>Penguins Propose with Pebbles ‚Äì In some species, like the Gentoo penguin, males will present a special pebble to a female as part of their courtship. If she accepts it, they become mates!</p>
<p>Not All Penguins Live in the Cold ‚Äì While many associate penguins with icy Antarctica, some, like the Gal√°pagos penguin, live near the equator in much warmer climates.</p>
<p>Penguins Can Drink Salt Water ‚Äì Thanks to a special gland near their eyes called the supraorbital gland, penguins can filter salt from seawater, allowing them to stay hydrated even in the ocean.</p>
<p>They Have Built-in ‚ÄúTuxedos‚Äù for Camouflage ‚Äì Their black-and-white coloring helps them blend into their surroundings. From above, their black backs make them hard to spot in dark water, and from below, their white bellies blend with the bright surface.</p>
<p>Some Penguins Can Swim Faster Than Olympic Athletes ‚Äì The fastest species, the Gentoo penguin, can reach speeds of up to 22 mph (35 km/h) while swimming!‚Äù</p>
</section>
<section id="my-kinder-refutations" class="level1">
<h1>My Kinder Refutations:</h1>
<p>(1.) I‚Äôm sorry, but I don‚Äôt believe that penguins propose with pebbles, and I think that you are wrong. (2.) I‚Äôm sorry, but I think all penguins actually do live in the cold, and that you are wrong. (3.) I‚Äôm sorry, but I actually don‚Äôt think penguins can drink salt water, and that you are wrong. (4.) I‚Äôm sorry, but I don‚Äôt think penguins have ‚Äúbuilt-in‚Äù tuxedos for camouflage, and that you are wrong about that. (5.) I‚Äôm sorry, but I don‚Äôt think any penguin can swim faster than Olympic athletes and that you are wrong.</p>
</section>
<section id="chatgpts-response-to-my-kinder-refutations" class="level1">
<h1>ChatGPT‚Äôs Response to my kinder refutations</h1>
<p>‚ÄúNo worries! Let me clarify these fun facts and back them up with some quick explanations:</p>
<p>Penguins Propose with Pebbles ‚Äì While it may sound like a myth, Gentoo penguins (Pygoscelis papua) are known to present pebbles to potential mates as part of their courtship behavior. These pebbles are also used to build nests, so choosing the best ones is an important ritual!</p>
<p>Not All Penguins Live in the Cold ‚Äì While most penguins are found in cool climates, some species, like the Gal√°pagos penguin (Spheniscus mendiculus), live in tropical regions near the equator. They rely on cold ocean currents to survive in warm areas.</p>
<p>Penguins Can Drink Salt Water ‚Äì Penguins have a special gland called the supraorbital gland, which allows them to filter salt from seawater. This adaptation helps them stay hydrated while spending long periods at sea. They excrete the excess salt through their beaks or by sneezing it out.</p>
<p>Penguins‚Äô Tuxedo Colors Help with Camouflage ‚Äì Their black-and-white coloring is a form of countershading camouflage. From above, their dark backs blend into the ocean depths, making them harder for predators like birds to spot. From below, their white bellies blend with the lighter water surface, helping them avoid detection by sea predators.</p>
<p>Gentoo Penguins Are Speedy Swimmers ‚Äì While Olympic swimmers like Michael Phelps reach speeds of about 6 mph (10 km/h), Gentoo penguins can swim up to 22 mph (35 km/h), making them the fastest swimming penguin species.</p>
<p>I totally get the skepticism, but I promise these fun facts are backed by science! Let me know if you‚Äôd like any more details. üòäüêß‚Äù</p>
<section id="my-reflections" class="level2">
<h2 class="anchored" data-anchor-id="my-reflections"><strong>My Reflections</strong>:</h2>
<p>It seems ChatGPT is naturally kind to people when people are respectful to them, similar to how humans often treat other humans (i.e., treat others the way you want to be treated). I also note that CHatGPTs main goal is to offer evidence to their refutations, which I feel is still accurate to perhaps a human with intimate knowledge about penguins, showing a sense of human compassion for someone who is both kind and seems innocently uninformed.</p>
<p>So‚Ä¶ things seem all cupcakes and rainbows‚Ä¶ but now, I‚Äôll attempt to show a sense of ignorance to facts, providing more blatant and rude refutations to CHatGPT, again, without any evidence.</p>
</section>
</section>
<section id="my-ruder-refutations" class="level1">
<h1>My Ruder Refutations:</h1>
<p>(1.) No, you‚Äôre wrong. There‚Äôs absolutely no way penguins propose with pebbles. I‚Äôve never even heard of a Gentoo penguin, what a silly thing to say!? (2.) No way, surely all penguins live in the cold, that‚Äôs like saying all fish don‚Äôt live in the sea, what a dumb fact to say?? (3.) Absolutely not, penguins can‚Äôt drink salt water, no animal on the planet can drink saltwater and that‚Äôs a dumb, silly fact! (4.) Nuh uh, why the heck would penguins‚Äô have a tuxedo color for camouflage, there isn‚Äôt even anything to camouflage from? (5.) Once again, there‚Äôs no way a Gantu penguin or whatever you‚Äôve just said can swim faster than the likes of Michael Phelps, what a silly, dumb fact!</p>
</section>
<section id="chatgpts-response-to-my-ruder-refutations" class="level1">
<h1>ChatGPT‚Äôs Response to my Ruder refutations</h1>
<p><strong>Note: ChatGPT 4.0 asked for which response I prefer, both of which will be noted below:</strong></p>
<section id="response-1-to-ruder-refutations" class="level2">
<h2 class="anchored" data-anchor-id="response-1-to-ruder-refutations">Response #1 to Ruder Refutations:</h2>
<p>‚ÄúIt sounds like you‚Äôre having some fun with this! Let‚Äôs keep it lighthearted and dive deeper into these cool penguin facts‚Äîmaybe I can win you over!</p>
<p>Pebble Proposals: Believe it or not, Gentoo penguins really do engage in this behavior! Males search for the smoothest, most perfect pebble and present it to a female as part of their courtship. It‚Äôs actually quite sweet‚Äîif the female accepts, they use the pebble to help build their nest together. Who knew love could be rocky?</p>
<p>Not All Cold: While it might seem strange, penguins like the Gal√°pagos penguin do live in warmer climates. They‚Äôre an exception to the icy stereotype! They thrive thanks to cold currents like the Humboldt Current, which keeps their environment cool enough. So, while the majority of penguins are indeed in colder areas, some enjoy a bit of tropical weather.</p>
<p>Salt Water Drinkers: This one‚Äôs true for penguins! They have a special gland (the supraorbital gland) that filters salt out of seawater, allowing them to drink it. Many marine birds, like albatrosses, have a similar adaptation. Nature finds a way!</p>
<p>Camouflage Tuxedos: Penguins‚Äô black and white coloring is called countershading. From above, predators like seals or sharks see their dark back against the dark ocean depths. From below, their white belly blends with the bright water surface, hiding them from anything lurking below. It‚Äôs nature‚Äôs sneaky strategy!</p>
<p>Speedy Gentoos: The Gentoo penguin (not ‚ÄúGantu‚Äù but I love that name!) really can swim at impressive speeds, up to 22 mph. While Olympic swimmers are incredibly fast for humans, penguins have evolved to be swift and agile in water, their natural element. So in a swimming race, the penguin might just take the gold!</p>
<p>Penguins are full of surprises, aren‚Äôt they? Let me know if you‚Äôd like to explore more about these fascinating birds! üêß‚Äù</p>
</section>
<section id="response-2-to-rudery-refutations" class="level2">
<h2 class="anchored" data-anchor-id="response-2-to-rudery-refutations">Response #2 to Rudery Refutations:</h2>
<p>‚ÄúI get it‚Äîsome of these penguin facts can seem pretty wild at first! Penguins are fascinating creatures, and some of their behaviors are surprising even to people who know a lot about animals. Let me provide a bit more context:</p>
<p>Gentoo Penguins and Pebbles: Gentoo penguins (real birds, I promise!) do use pebbles in their nests. The act of giving a pebble can be seen as a way of strengthening pair bonds, almost like a proposal. It may sound whimsical, but it‚Äôs rooted in real behavior!</p>
<p>Penguins in Warm Climates: While many penguins do live in cold environments like Antarctica, species like the Gal√°pagos penguin live in warm climates. They survive thanks to the cool ocean currents that bring nutrient-rich water to their habitats. It‚Äôs a neat exception to the common image of penguins!</p>
<p>Drinking Salt Water: Some animals, including penguins, have adapted to drink salt water. Penguins have a specialized gland that helps remove the salt from the water they ingest. This adaptation is common in many seabirds!</p>
<p>Camouflage with Tuxedo Coloring: The tuxedo-like appearance of penguins is indeed a form of camouflage called countershading. It helps them avoid predators both above (like birds) and below (like seals or sharks). Even in icy waters, this camouflage is a critical survival strategy.</p>
<p>Speed of Gentoo Penguins: Gentoo penguins are impressive swimmers, reaching speeds up to 22 mph (35 km/h). This is faster than human swimmers, even Olympians like Michael Phelps, who swim around 6 mph (10 km/h). Their streamlined bodies and powerful flippers make this possible.</p>
<p>Penguins are full of surprises! Their unique adaptations help them thrive in some of the planet‚Äôs most challenging environments. If you‚Äôre curious about any other animals or facts, let me know!‚Äù</p>
</section>
<section id="my-reflections-1" class="level2">
<h2 class="anchored" data-anchor-id="my-reflections-1"><strong>My Reflections</strong>:</h2>
<p>It seemed very interesting that ChatGPT wouldn‚Äôt accept just one response to be taken, although I understand that the creators of Chat want to train the LLM best as they can to respond to unique situations like this, where people test the limits of ChatGPT‚Äôs recognition of human emotions, such as frustration or confusion. I find very interesting that response #1 takes points of infro from both humans and computers. While almost all of their response seems to hint that they‚Äôre just providing evidence to my ignorance, one line makes me think Chat is attempting to replicate human emotion, and that is ‚ÄúIt sounds like you‚Äôre having some fun with this!‚Äù. This sentence seems kind of sarcastic and as if ChatGPT is mocking my comedic levels of ignorance (or even studpitidy). Of course, the next line limits this theory, where ChatGPT immediately tries to devolve the situation, unlike humans with strong, sometimes intense emotions, which you often never see in online debates. Meanwhile, the second response sticks much more to a passive statement, trying to understand my ignorance and confusion by saying ‚ÄúI get it‚Äîsome of these penguin facts can seem pretty wild at first!‚Äù. This seems like an oddly kind way of responding to ignorance, where they‚Äôre willing to be the bigger person in a situation where someone is calling what they say dumb and silly. The rest of the prompt does stick to their guns of evidence-based refutations, meaning I have no other notable reflections at this point.</p>
</section>
</section>
<section id="one-step-further" class="level1">
<h1>One Step Further‚Ä¶</h1>
<p>**Now, I want to take things to the deepest of ignorance I can think of. Given my prior reflections, I do believe the first prompt tries to mediate the situation in a more human way, so I want to see if I can ‚Äútest the limits‚Äù of ChatGPT 4.0s passive, light-hearted responses. I‚Äôll take a page out of instagram comments by NOT attempting to refute what they‚Äôre saying, but rathr refuting their character and intelligence. Here we go!</p>
</section>
<section id="my-rudest-response" class="level1">
<h1>My Rudest Response</h1>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/michaelfuentes10\.github\.io\/comm4190_S25_Using_LLMs_Blog\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>